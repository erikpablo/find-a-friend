generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model Org {
  id        String    @id @default(uuid())
  owner     String
  orgName   String    @unique @map("org_name")
  email     String    @unique
  password  String
  phone     String
  createdAt DateTime  @default(now()) @map("created_at")
  updatedAt DateTime? @updatedAt @map("updated_at")

  pets        Pet[]
  org_address OrgAddress[]

  @@map("orgs")
}

model OrgAddress {
  id           String  @id @default(uuid())
  street       String
  number       String
  neighborhood String
  city         String
  state        String
  cep          String
  complement   String?
  latitude     Decimal
  longitude    Decimal

  org   Org    @relation(fields: [orgId], references: [id])
  orgId String @map("org_id")

  pets Pet[]

  @@map("org_address")
}

enum LevelEnergy {
  LOW
  MEDIUM
  HIGH
  VERY_HIGH
}

enum LevelIndependency {
  LOW
  MEDIUM
  HIGH
  VERY_HIGH
}

enum PetSize {
  VERY_SMALL
  SMALL
  MEDIUM
  MAXI
  GIANT
}

enum PetAge {
  PUPPY
  ADULT
}

model Pet {
  id                   String            @id @default(uuid())
  name                 String
  description          String?
  age                  PetAge
  levelEnergy          LevelEnergy       @map("level_energy")
  levelIndependency    LevelIndependency @map("level_independency")
  environmentType      String            @map("environment_type")
  size                 PetSize
  adoptionRequirements String            @map("adoption_requirements")
  adopted              Boolean           @default(false)
  createdAt            DateTime          @default(now()) @map("created_at")
  updatedAt            DateTime?         @updatedAt @map("updated_at")

  org        Org         @relation(fields: [orgId], references: [id])
  orgId      String      @map("org_id")
  pet_images PetImages[]

  orgAddress   OrgAddress @relation(fields: [orgAddressId], references: [id])
  orgAddressId String     @map("org_address_id")

  @@map("pets")
}

model PetImages {
  id       String @id @default(uuid())
  fileName String @map("filename")

  createdAt DateTime  @default(now()) @map("created_at")
  updatedAt DateTime? @updatedAt @map("updated_at")

  pet   Pet    @relation(fields: [petId], references: [id])
  petId String @map("pet_id")

  @@map("pet_images")
}
